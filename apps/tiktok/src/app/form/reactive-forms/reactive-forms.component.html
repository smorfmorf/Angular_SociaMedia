<form [formGroup]="form" (ngSubmit)="onSubmit($event)">
  <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</h2>

  <label for="type" class="tt-label">
    –¢–∏–ø –ø–æ–ª—É—á–∞—Ç–µ–ª—è
    <select class="tt-input" formControlName="type">
      <option [value]="selectOption.PERSON">–§–∏–∑–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ</option>
      <option [value]="selectOption.LEGAL">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ</option>
    </select>
  </label>

  <label for="name">
    –ò–º—è:
    <!-- –ø–æ formControlName, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏—Ä–µ–∫—Ç–∏–≤ –Ω–∞ —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç -->
    <input
      formControlName="name"
      class="tt-input"
      type="text"
      id="name"
      placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"
    />
    <small class="validation-error">–ü–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ!!!</small>
  </label>
  <!-- –ü—Ä–æ—Å—Ç—ã–µ –≤–µ—â–∏ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ —á–µ—Ä–µ–∑ css (–µ—Å–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏) -->
  @if(form.controls.name.touched && form.controls.name.hasError('startsWith')){
  <b style="color: red">
    {{ form.controls.name.getError('startsWith') }}
  </b>
  }
  <!-- –ê—Å–∏–Ω—Ö—Ä–æ–Ω—ã–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä  -->
  @if(form.controls.name.touched && form.controls.name.hasError('nameValid')){
  <b style="color: red">
    {{ form.controls.name.getError('nameValid').message }}
  </b>
  }
  <!--  -->

  @if(form.controls.type.value === selectOption.LEGAL){
  <label>
    –ò–ù–ù
    <input
      formControlName="inn"
      type="text"
      class="tt-input"
      placeholder="–í–≤–µ–¥–∏—Ç–µ –ò–ù–ù"
    />
  </label>
  } @else {
  <label>
    –§–∞–º–∏–ª–∏—è
    <input
      formControlName="lastName"
      type="text"
      class="tt-input"
      placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é"
    />
  </label>
  }

  <div
    formGroupName="numbers"
    style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px"
  >
    <label>
      –î–æ–º–∞—à–Ω–∏–π –Ω–æ–º–µ—Ä
      <input class="tt-input" type="text" formControlName="home" />
    </label>
    <label>
      –û—Ñ—Ñ–∏—Å–Ω—ã–π –Ω–æ–º–µ—Ä
      <input class="tt-input" type="text" formControlName="office" />
    </label>
    <label style="grid-column: 1/3">
      –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ú–∞—Å–∫–∏—Ç–æ –∑–∞–µ–±–∏—Å—å üòé
      <input
        class="tt-input"
        placeholder="Maskito Mask Date dd/mm/yyyy"
        [maskito]="options"
      />
    </label>
  </div>

  <hr style="margin: 20px 0" />
  <div>
    <div style="display: flex; justify-content: space-between">
      <h2>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
      <button class="btn" (click)="addAddress()">+</button>
    </div>
    @for( group of form.controls.addresses.controls; track group; let idx =
    $index ) {
    <div class="form-grid" [formGroup]="group">
      <label for="street">
        –ì–æ—Ä–æ–¥
        <input formControlName="city" type="text" class="tt-input" />
      </label>
      <label>
        –£–ª–∏—Ü–∞
        <input formControlName="street" type="text" class="tt-input" />
      </label>
      <label>
        –î–æ–º
        <input formControlName="home" type="text" class="tt-input" />
      </label>
      <label>
        –ö–≤–∞—Ä—Ç–∏—Ä–∞
        <input formControlName="room" type="text" class="tt-input" />
      </label>

      <button
        (click)="deleteAddress(idx)"
        class="btn"
        type="submit"
        style="grid-column: 1/3"
      >
        –£–¥–∞–ª–∏—Ç—å
      </button>
    </div>
    }
  </div>

  <!--formGroup —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ñ–æ—Ä–º—É –≤ —à–∞–±–ª–æ–Ω–µ,
    formControlName –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∏–Ω–ø—É—Ç—ã –∫ FormControl                                          -->
  <div [formGroup]="form.controls.feature">
    <h4>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h4>

    <div style="display: grid; gap: 10px">
      @for(control of form.controls.feature.controls | keyvalue : sortFn; track
      control; let idx = $index) {
      <label>
        {{ getFeaturesArray[idx].label }}
        <input type="checkbox" [formControlName]="control.key" />
      </label>
      }
    </div>
  </div>

  <div class="two-columns" [formGroup]="form.controls.dateRange">
    <label>
      –û—Ç
      <input formControlName="from" class="tt-input" type="date" />
    </label>
    <label>
      –î–æ
      <input formControlName="to" class="tt-input" type="date" />
    </label>
  </div>

  @if(form.controls.dateRange.hasError('dateRange') &&
  form.controls.dateRange.touched) {
  <b style="color: red">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –±–æ–ª—å—à–µ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è</b>
  }

  <button class="btn" type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
</form>
